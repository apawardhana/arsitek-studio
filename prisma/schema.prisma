// Prisma Schema for Arsitek Studio CMS
// Using SQLite for local development

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "sqlite"
  url       = "file:./dev.db"
}

model User {
  id        String    @id @default(cuid())
  name      String
  email     String    @unique
  password  String
  role      String    @default("EDITOR") // ADMIN or EDITOR
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  projects  Project[]
}

model Project {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  category    String   // Architecture, Interior, Landscape, etc.
  sector      String   // Residential, Commercial, Hospitality, etc.
  description String
  coverImage  String
  client      String?
  location    String?
  year        Int?
  featured    Boolean  @default(false)
  status      String   @default("DRAFT") // DRAFT or PUBLISHED
  displayOrder Int     @default(0)

  createdBy   User     @relation(fields: [createdById], references: [id])
  createdById String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  images ProjectImage[]

  // SEO
  metaTitle       String?
  metaDescription String?
}

model ProjectImage {
  id           String   @id @default(cuid())
  projectId    String
  project      Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  imageUrl     String
  alt          String?
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
}

model TeamMember {
  id           String   @id @default(cuid())
  name         String
  slug         String   @unique
  role         String
  photo        String
  bio          String?
  email        String?
  linkedin     String?
  department   String   // Leadership, Architecture, Interior, Engineering, Admin
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Service {
  id           String   @id @default(cuid())
  number       String
  title        String
  slug         String   @unique
  description  String
  icon         String?
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model CompanyInfo {
  id                String   @id @default("main")
  name              String   @default("Arsitek Studio")
  tagline           String?
  story             String?
  philosophy        String?
  vision            String?
  mission           String?
  yearsExperience   Int      @default(0)
  projectsCompleted Int      @default(0)
  teamSize          Int      @default(0)
  awards            Int      @default(0)
  email             String?
  phone             String?
  address           String?
  googleMapsEmbed   String?
  instagram         String?
  linkedin          String?
  facebook          String?
  updatedAt         DateTime @updatedAt
}

model FormSubmission {
  id        String   @id @default(cuid())
  name      String
  email     String
  phone     String?
  subject   String
  message   String
  isRead    Boolean  @default(false)
  createdAt DateTime @default(now())
}

model AnalyticsEvent {
  id        String   @id @default(cuid())
  type      String   // PAGE_VIEW, PROJECT_VIEW, FORM_SUBMIT
  slug      String
  userAgent String?
  ip        String?
  referrer  String?
  createdAt DateTime @default(now())
}
